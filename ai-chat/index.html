<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seputar Teknologi - Segi AI</title>
    <link rel="icon" href="/images/teknologi.jpg" type="image/png" />
    <style>
        :root {
            --primary-color: #5a5555;
            --secondary-color: #200808;
            --background-color: #F4F7FA;
            --text-color: #2C3E50;
            --input-background: #FFFFFF;
            --message-ai-background: #E6F2FF;
            --message-user-background: #F0F0F0;
            --gradient-start: #942f2f;
            --gradient-end: #440707;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) transparent;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--background-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .chat-container {
padding-top: 60px;
            width: 100%;
            max-width: 500px;
            height: 90vh;
            max-height: 800px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1), 0 5px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            background-color: white;
            position: relative;
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .verified-badge {
            width: 24px;
            height: 24px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--primary-color);
        }

        .header-actions button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .header-actions button:hover {
            background: rgba(255,255,255,0.3);
        }

        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            background-color: var(--background-color);
        }

        .message {
            max-width: 80%;
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 15px;
            position: relative;
            line-height: 1.5;
            clear: both;
        }

        .message-ai {
            background-color: var(--message-ai-background);
            color: var(--text-color);
            align-self: flex-start;
            float: left;
            margin-right: auto;
        }

        .message-user {
            background-color: var(--primary-color);
            color: white;
            align-self: flex-end;
            float: right;
            margin-left: auto;
        }

        .chat-input-area {
            display: flex;
            padding: 15px;
            background-color: white;
            border-top: 1px solid #E6E6E6;
        }

        #user-input {
            flex-grow: 1;
            border: 1px solid #E6E6E6;
            background-color: var(--input-background);
            resize: none;
            padding: 12px;
            border-radius: 15px;
            margin-right: 10px;
            font-size: 16px;
            max-height: 150px;
        }

        #send-btn {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        #send-btn:hover {
            transform: scale(1.05);
        }

        #send-btn svg {
            width: 24px;
            height: 24px;
        }

        .loading-dots {
            display: flex;
            justify-content: center;
        }

        .loading-dots span {
            font-size: 24px;
            color: var(--primary-color);
            animation: loading 1.4s infinite;
        }

        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes loading {
            0%, 60%, 100% { opacity: 0; }
            30% { opacity: 1; }
        }

        @media (max-width: 600px) {
            .chat-container {
                width: 100%;
                height: 100vh;
                max-height: none;
                border-radius: 0;
            }
        }
             /* Navbar styles */
      .navbar {
        background-color: white;
        border-bottom: 1px solid #dbdbdb;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
      }

      .nav-container {
        max-width: 975px;
        margin: 0 auto;
        padding: 0 20px;
        height: 60px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .nav-brand {
        font-size: 24px;
        font-weight: bold;
        color: #262626;
        text-decoration: none;
      }

      .nav-menu {
        display: flex;
        align-items: center;
        gap: 22px;
      }

      .nav-item {
        text-decoration: none;
        color: #262626;
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px;
        border-radius: 8px;
        transition: background-color 0.2s;
      }

      .nav-item:hover {
        background-color: #f0f0f0;
      }

      .nav-item.active {
        font-weight: bold;
      }

      .notification-badge {
        background-color: #ff3040;
        color: white;
        font-size: 12px;
        padding: 2px 6px;
        border-radius: 10px;
        margin-left: -6px;
        margin-top: -10px;
      }

      .profile-pic {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
      }
      .profile-name {
        font-size: 1.5rem;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .hamburger {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
      }

      /* Mobile menu */
      .mobile-menu {
        display: none;
        position: fixed;
        top: 60px;
        left: 0;
        right: 0;
        background-color: white;
        border-bottom: 1px solid #dbdbdb;
        padding: 20px;
      }

      .mobile-menu .nav-item {
        padding: 12px;
        border-radius: 8px;
      }

      .search-container {
        position: relative;
        display: flex;
        align-items: center;
      }

      .search-input {
        padding: 8px 12px;
        border: 1px solid #dbdbdb;
        border-radius: 8px;
        width: 240px;
        font-size: 14px;
      }

      /* Responsive styles */
      @media (max-width: 768px) {
        .nav-menu {
          display: none;
        }

        .hamburger {
          display: block;
        }

        .mobile-menu.active {
          display: flex;
          flex-direction: column;
        }

        .search-container {
          display: none;
        }

        .mobile-menu .search-container {
          display: flex;
          margin: 12px 0;
        }

        .mobile-menu .search-input {
          width: 100%;
        }
      }
    </style>
</head>
<body>
    <nav class="navbar" role="navigation">
        <div class="nav-container">
          <a href="#" class="nav-brand">Seputar Teknologi</a>
  
          <div class="search-container">
            <input
              type="search"
              class="search-input"
              placeholder="Search"
              aria-label="Search"
            />
          </div>
  
          <div class="nav-menu">
            <a href="/" class="nav-item active" aria-label="Home">
              <svg
                aria-hidden="true"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 2.0996L1 12H4V21H11V15H13V21H20V12H23L12 2.0996ZM12 4.79152L18 10.1914V19H15V13H9V19H6V10.1914L12 4.79152Z"
                />
              </svg>
            </a>
  
            <a href="/explorer" class="nav-item" aria-label="Explore">
              <svg
                aria-hidden="true"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20Z"
                />
                <path d="M13 7H11V13H17V11H13V7Z" />
              </svg>
            </a>
  
            <a href="/ai-chat" class="nav-item" aria-label="Messages">
              <svg
                aria-hidden="true"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H6L4 18V4H20V16Z"
                />
              </svg>
            </a>
  
            <a href="#" class="nav-item" aria-label="Notifications">
              <svg
                aria-hidden="true"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16ZM16 17H8V11C8 8.52 9.51 6.5 12 6.5C14.49 6.5 16 8.52 16 11V17Z"
                />
              </svg>
              <span class="notification-badge">3</span>
            </a>
  
            <a href="/profile" class="nav-item" aria-label="Profile">
              <img
                src="/images/teknologi.jpg"
                alt="Profile"
                class="profile-pic"
              />
            </a>
          </div>
  
          <button
            class="hamburger"
            aria-label="Toggle menu"
            aria-expanded="false"
          >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z" />
            </svg>
          </button>
        </div>
  
        <div class="mobile-menu">
          <div class="search-container">
            <input
              type="search"
              class="search-input"
              placeholder="Search"
              aria-label="Search"
            />
          </div>
          <a href="/" class="nav-item active">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2.0996L1 12H4V21H11V15H13V21H20V12H23L12 2.0996ZM12 4.79152L18 10.1914V19H15V13H9V19H6V10.1914L12 4.79152Z"
              />
            </svg>
            Home
          </a>
          <a href="/explorer" class="nav-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20Z"
              />
              <path d="M13 7H11V13H17V11H13V7Z" />
            </svg>
            Explore
          </a>
          <a href="/ai-chat" class="nav-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H6L4 18V4H20V16Z"
              />
            </svg>
            Chat with AI
          </a>
          <a href="#" class="nav-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.37 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.64 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16ZM16 17H8V11C8 8.52 9.51 6.5 12 6.5C14.49 6.5 16 8.52 16 11V17Z"
              />
            </svg>
            Notifications
          </a>
          <a href="/profile" class="nav-item">
            <img
              src="/images/teknologi.jpg"
              alt="Profile"
              class="profile-pic"
            />
            Profile
          </a>
        </div>
      </nav>
    <div class="chat-container">
        <div class="chat-header">
            <div class="header-title">
                <h1>Segi AI</h1>
                <div class="verified-badge">‚úì</div>
            </div>
            <div class="header-actions">
                <button id="new-chat-btn">Chat Baru</button>
                <button id="clear-history-btn">Hapus</button>
            </div>
        </div>
        
        <div class="chat-messages" id="chat-messages">
            <div class="message message-ai">
                Hai! Saya Segi AI, siap membantu Anda. Apa yang ingin Anda tanyakan?
            </div>
        </div>
        
        <div class="chat-input-area">
            <textarea 
                id="user-input" 
                placeholder="Ketik pertanyaan Anda di sini..."
                rows="1"
            ></textarea>
            <button id="send-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
            </button>
        </div>
    </div>

    <script>
class ChatInterface {
    constructor(apiKey) {
        this.apiKey = apiKey;
        this.chatMessages = document.getElementById('chat-messages');
        this.userInput = document.getElementById('user-input');
        this.sendBtn = document.getElementById('send-btn');
        this.newChatBtn = document.getElementById('new-chat-btn');
        this.clearHistoryBtn = document.getElementById('clear-history-btn');
        this.conversationHistory = [];

        this.initEventListeners();
    }

    initEventListeners() {
        this.userInput.addEventListener('input', () => {
            this.userInput.style.height = 'auto';
            this.userInput.style.height = `${Math.min(this.userInput.scrollHeight, 150)}px`;
        });

        this.sendBtn.addEventListener('click', () => this.sendMessage());

        this.userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                this.sendMessage();
            }
        });

        this.newChatBtn.addEventListener('click', () => this.startNewChat());
        this.clearHistoryBtn.addEventListener('click', () => this.clearChatHistory());
    }

    async sendMessage() {
        const userMessage = this.userInput.value.trim();
        if (!userMessage) return;

        // Tampilkan pesan pengguna
        this.displayMessage(userMessage, 'user');
        this.conversationHistory.push({
            role: 'user',
            parts: [{ text: userMessage }]
        });

        // Kosongkan input
        this.userInput.value = '';
        this.userInput.style.height = 'auto';

        try {
            // Tampilkan indikator loading
            this.displayMessage('Sedang memikirkan...', 'ai', true);

            // Panggil API Gemini
            const response = await this.callGeminiAPI(userMessage);

            // Hapus pesan loading
            this.chatMessages.lastChild.remove();

            // Tampilkan respons AI
            this.displayMessage(response, 'ai');

            // Tambahkan respons ke riwayat percakapan
            this.conversationHistory.push({
                role: 'model',
                parts: [{ text: response }]
            });
        } catch (error) {
            console.error('Kesalahan API:', error);
            this.displayMessage('Maaf, terjadi kesalahan dalam memproses permintaan Anda.', 'ai');
        }
    }

    async callGeminiAPI(message) {
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${this.apiKey}`;

        const requestBody = {
            contents: this.conversationHistory,
            generationConfig: {
                temperature: 0.7,
                topK: 40,
                topP: 0.9,
                maxOutputTokens: 2048,
            }
        };

        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(requestBody)
        });

        if (!response.ok) {
            const errorDetail = await response.text();
            throw new Error(`Kesalahan API: ${errorDetail}`);
        }

        const data = await response.json();
        
        // Ekstrak teks dari respons Gemini
        const aiResponse = data.candidates[0].content.parts[0].text;
        
        return this.strukturkanRespons(aiResponse);
    }

    strukturkanRespons(teks) {
        // Metode untuk membuat respons lebih terstruktur
        const paragraf = teks.split('\n\n');
        const strukturRespons = paragraf.map((p, index) => {
            // Pecah paragraf menjadi baris-baris
            const lines = p.split('\n');
            
            // Buat struktur dengan nomor atau bullet point
            const strukturedLines = lines.map((line, lineIndex) => {
                // Hilangkan spasi berlebih
                line = line.trim();
                
                // Cek apakah baris sudah memiliki penanda
                if (line.match(/^[\d.]+\s/) || line.match(/^[‚Ä¢\-*>]\s/)) {
                    return line; // Jika sudah ada penanda, gunakan seperti apa adanya
                }
                
                // Tambahkan penanda berdasarkan index
                if (index === 0 && lineIndex === 0) {
                    // Paragraf pertama, gunakan emoji
                    return `üìå ${line}`;
                } else if (lineIndex === 0) {
                    // Paragraf selanjutnya, gunakan panah
                    return `‚û°Ô∏è ${line}`;
                } else {
                    // Baris lanjutan, gunakan bullet point
                    return `‚Ä¢ ${line}`;
                }
            });

            return strukturedLines.join('\n');
        }).join('\n\n');

        return strukturRespons;
    }

    displayMessage(message, type, isLoading = false) {
        const messageElement = document.createElement('div');
        messageElement.classList.add('message', `message-${type}`);

        if (isLoading) {
            messageElement.innerHTML = `
                <div class="loading-dots">
                    <span>.</span>
                    <span>.</span>
                    <span>.</span>
                </div>
            `;
        } else {
            messageElement.textContent = message;
        }

        this.chatMessages.appendChild(messageElement);
        this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
    }

    startNewChat() {
        this.conversationHistory = [];
        this.chatMessages.innerHTML = `
            <div class="message message-ai">
                Hai! Saya Segi AI, siap membantu Anda. Chat baru dimulai.
            </div>
        `;
    }

    clearChatHistory() {
        this.startNewChat();
    }
}

// PENTING: Ganti dengan API KEY Anda dari Google AI Studio
const API_KEY = 'AIzaSyBJE6IqXU1oDBBhnvNbnrpHZIvwfrS08Ms';

document.addEventListener('DOMContentLoaded', () => {
    const chatInterface = new ChatInterface(API_KEY);
});
document.addEventListener("DOMContentLoaded", function () {
        const hamburger = document.querySelector(".hamburger");
        const mobileMenu = document.querySelector(".mobile-menu");
        const navItems = document.querySelectorAll(".nav-item");

        // Toggle mobile menu
        hamburger.addEventListener("click", function () {
          mobileMenu.classList.toggle("active");
          const isExpanded = mobileMenu.classList.contains("active");
          hamburger.setAttribute("aria-expanded", isExpanded);
        });

        // Handle active state for nav items
        navItems.forEach((item) => {
          item.addEventListener("click", function (e) {
            // Remove active class from all items
            navItems.forEach((navItem) => navItem.classList.remove("active"));
            // Add active class to clicked item
            this.classList.add("active");
          });
        });

        // Close mobile menu when clicking outside
        document.addEventListener("click", function (e) {
          if (
            !e.target.closest(".mobile-menu") &&
            !e.target.closest(".hamburger")
          ) {
            mobileMenu.classList.remove("active");
            hamburger.setAttribute("aria-expanded", "false");
          }
        });

        // Handle keyboard navigation
        navItems.forEach((item) => {
          item.addEventListener("keydown", function (e) {
            if (e.key === " " || e.key === "Enter") {
              e.preventDefault();
              this.click();
            }
          });
        });
      });
    </script>
</body>
</html>
